(async()=>{for(;!Spicetify.React||!Spicetify.ReactDOM;)await new Promise(e=>setTimeout(e,10));var e,t;e=class{constructor(e,t){this.url=e,this.retryInterval=t,this.socket=null}connect(){console.log("Attempting to connect to "+this.url),this.socket=new WebSocket(this.url),this.socket.onopen=()=>{console.log("WebSocket connection established.")},this.socket.onmessage=e=>{this.handleCommand(e.data.toLowerCase())},this.socket.onclose=()=>{console.warn("WebSocket closed. Reconnecting..."),this.scheduleReconnect()},this.socket.onerror=()=>{var e;console.error("WebSocket error. Reconnecting..."),null!=(e=this.socket)&&e.close()}}scheduleReconnect(){setTimeout(()=>this.connect(),this.retryInterval)}handleCommand(e){switch(console.log("Got command: "+e),e){case"toggle_play":Spicetify.Player.togglePlay();break;case"previous":5e3<Spicetify.Player.getProgress()?Spicetify.Player.seek(0):Spicetify.Player.back();break;case"next":Spicetify.Player.next()}}},t=async function(){new e("ws://127.0.0.1:7542",5e3).connect()},(async()=>{await t()})()})();